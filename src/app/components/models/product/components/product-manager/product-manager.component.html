<div class="progress-content">
  <mat-progress-bar [mode]="'indeterminate'" *ngIf="isLoadingResults"></mat-progress-bar>
</div>
<app-breadcrumb [show]=true [bread]="bread"></app-breadcrumb>
<div class="content margin_footer">
  <mat-card class="mat-elevation-z2">
    <mat-menu #contextMenu="matMenu">
      <ng-template matMenuContent>

        <button mat-menu-item [disabled]="!validateOid()" (click)="onSubmit()">
          <mat-icon>save_alt</mat-icon>
          <span>Save</span>
        </button>

      </ng-template>
    </mat-menu>

    <form class="form" [formGroup]="form" (ngSubmit)="onSubmit()">

      <mat-card-content>
        <div class="row">
          <div class="col-12">
            <mat-form-field>
              <mat-label>
                Name
              </mat-label>
              <input matInput autocomplete="name" required maxlength="90" formControlName="name"
                     type="text">
              <mat-error align="end" *ngIf="form.get('name')?.invalid">
                Please enter a valid name
              </mat-error>
            </mat-form-field>
          </div>

          <div class="col-12">
            <mat-form-field>
              <mat-label>
                Stock
              </mat-label>
              <input matInput autocomplete="off" formControlName="stock_" type="number">
            </mat-form-field>
          </div>

          <div class="col-12">
            <mat-form-field>
              <mat-label>
                Price
              </mat-label>
              <input matInput autocomplete="off" formControlName="price" type="number">
            </mat-form-field>
          </div>

          <div class="col-12">
            <mat-form-field>
              <mat-label>Description</mat-label>
              <textarea matInput required maxlength="700" rows="3"
                        placeholder="Please enter a description" formControlName="description"></textarea>
              <mat-error align="end" *ngIf="form.get('description')?.invalid">
                Please enter a valid description
              </mat-error>
              <mat-hint align="end">{{form.get('description')?.value?.length || 0 }}/700</mat-hint>
            </mat-form-field>
          </div>

        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" type="submit" [disabled]="isLoadingResults">Save</button>
        <button mat-button type="reset" (click)="clear()">Cancel</button>
      </mat-card-actions>
    </form>
  </mat-card>
</div>
